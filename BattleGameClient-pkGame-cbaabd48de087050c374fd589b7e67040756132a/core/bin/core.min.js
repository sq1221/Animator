var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},BaseClass=function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;if(!n._instance){var i=t.length;0==i?n._instance=new n:1==i?n._instance=new n(t[0]):2==i?n._instance=new n(t[0],t[1]):3==i?n._instance=new n(t[0],t[1],t[2]):4==i?n._instance=new n(t[0],t[1],t[2],t[3]):5==i&&(n._instance=new n(t[0],t[1],t[2],t[3],t[4]))}return n._instance},t}();__reflect(BaseClass.prototype,"BaseClass");var UTFMsg=function(){function t(){}return t.prototype.receive=function(t){var e=t.readUTF(),n=this.decode(e);n&&App.MessageCenter.dispatch(SocketConst.SOCKET_DATA,n)},t.prototype.send=function(t,e){var n=this.encode(e);n&&(t.type=egret.WebSocket.TYPE_STRING,t.writeUTF(n))},t.prototype.decode=function(t){return Log.trace("decode需要子类重写，根据项目的协议结构解析"),null},t.prototype.encode=function(t){return Log.trace("encode需要子类重写，根据项目的协议结构解析"),null},t}();__reflect(UTFMsg.prototype,"UTFMsg",["BaseMsg"]);var particle;!function(t){var e=function(){function t(){this.matrix=new egret.Matrix,this.reset()}return t.prototype.reset=function(){this.x=0,this.y=0,this.scale=1,this.rotation=0,this.alpha=1,this.currentTime=0,this.totalTime=1e3},t.prototype.$getMatrix=function(t,e){var n=this.matrix;if(n.identity(),this.rotation%360)var i=this.rotation,r=egret.NumberUtils.cos(i),o=egret.NumberUtils.sin(i);else r=1,o=0;return n.append(r*this.scale,o*this.scale,-o*this.scale,r*this.scale,this.x,this.y),(t||e)&&(n.tx-=t*n.a+e*n.c,n.ty-=t*n.b+e*n.d),n},t}();t.Particle=e,__reflect(e.prototype,"particle.Particle")}(particle||(particle={}));var particle;!function(t){var e=function(e){function n(t,n){var i=e.call(this)||this;return i._pool=[],i.frameTime=0,i.particles=[],i._emitterX=0,i._emitterY=0,i.emissionTime=-1,i.maxParticles=200,i.numParticles=0,i.particleClass=null,i.$particleConfig=null,i.particleMeasureRect=new egret.Rectangle,i.transformForMeasure=new egret.Matrix,i.bitmapNodeList=[],egret.nativeRender?(i.initConfig(n,0,0),i.changeTexture(t)):(i.emissionRate=n,i.texture=t,i.$renderNode=new egret.sys.GroupNode,i.$renderNode.cleanBeforeRender=function(){}),i}return __extends(n,e),n.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(10)},n.prototype.initConfig=function(t,e,n){this.$particleConfig=[t,e,n,0,200],this.emissionRate=t,this._emitterX=e,this._emitterY=n},n.prototype.getParticle=function(){var e;return e=this._pool.length?this._pool.pop():this.particleClass?new this.particleClass:new t.Particle},n.prototype.removeParticle=function(t){var e=this.particles.indexOf(t);return-1!=e?(t.reset(),this.particles.splice(e,1),this._pool.push(t),this.numParticles--,this.bitmapNodeList.length>this.numParticles&&(this.bitmapNodeList.length=this.numParticles,this.$renderNode.drawData.length=this.numParticles),!0):!1},n.prototype.initParticle=function(t){t.x=this.emitterX,t.y=this.emitterY,t.currentTime=0,t.totalTime=1e3},n.prototype.updateRelativeBounds=function(t){t?(null==this.relativeContentBounds&&(this.relativeContentBounds=new egret.Rectangle),this.relativeContentBounds.copyFrom(t),this.relativeContentBounds.x+=this.emitterX,this.relativeContentBounds.y+=this.emitterY):this.relativeContentBounds=null,this.mask=this.relativeContentBounds},Object.defineProperty(n.prototype,"emitterBounds",{get:function(){return this._emitterBounds},set:function(t){this._emitterBounds=t,this.updateRelativeBounds(t),egret.nativeRender&&this.onPropertyChanges()},enumerable:!0,configurable:!0}),n.prototype.onPropertyChanges=function(){this.$nativeDisplayObject.setCustomData(this.$particleConfig)},Object.defineProperty(n.prototype,"emitterX",{get:function(){return this._emitterX},set:function(t){this._emitterX=t,this.updateRelativeBounds(this.emitterBounds),egret.nativeRender&&this.onPropertyChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"emitterY",{get:function(){return this._emitterY},set:function(t){this._emitterY=t,this.updateRelativeBounds(this.emitterBounds),egret.nativeRender&&this.onPropertyChanges()},enumerable:!0,configurable:!0}),n.prototype.start=function(t){void 0===t&&(t=-1),0!=this.emissionRate&&(this.emissionTime=t,egret.nativeRender?(this.$particleConfig[3]=t,this.$nativeDisplayObject.setCustomData(this.$particleConfig)):(this.timeStamp=egret.getTimer(),egret.startTick(this.update,this)))},n.prototype.stop=function(t){return void 0===t&&(t=!1),egret.nativeRender?void this.$nativeDisplayObject.setStopToParticle(t):(this.emissionTime=0,void(t&&(this.clear(),egret.stopTick(this.update,this))))},n.prototype.update=function(t){var e=t-this.timeStamp;if(this.timeStamp=t,-1==this.emissionTime||this.emissionTime>0){for(this.frameTime+=e;this.frameTime>0;)this.numParticles<this.maxParticles&&this.addOneParticle(),this.frameTime-=this.emissionRate;-1!=this.emissionTime&&(this.emissionTime-=e,this.emissionTime<0&&(this.emissionTime=0))}for(var n,i=0;i<this.numParticles;)n=this.particles[i],n.currentTime<n.totalTime?(this.advanceParticle(n,e),n.currentTime+=e,i++):this.removeParticle(n);return this.$renderDirty=!0,0==this.numParticles&&0==this.emissionTime&&(egret.stopTick(this.update,this),this.dispatchEventWith(egret.Event.COMPLETE)),!1},n.prototype.$measureContentBounds=function(t){if(this.relativeContentBounds)return void t.copyFrom(this.relativeContentBounds);if(this.numParticles>0){for(var e,n=this.texture,i=Math.round(n.$getScaleBitmapWidth()),r=Math.round(n.$getScaleBitmapHeight()),o=egret.Rectangle.create(),a=0;a<this.numParticles;a++){e=this.particles[a],this.transformForMeasure.identity(),this.appendTransform(this.transformForMeasure,e.x,e.y,e.scale,e.scale,e.rotation,0,0,i/2,r/2),this.particleMeasureRect.setEmpty(),this.particleMeasureRect.width=i,this.particleMeasureRect.height=r;var s=Region.create();if(s.updateRegion(this.particleMeasureRect,this.transformForMeasure),0==a)o.setTo(s.minX,s.minY,s.maxX-s.minX,s.maxY-s.minY);else{var c=Math.min(o.x,s.minX),h=Math.min(o.y,s.minY),u=Math.max(o.right,s.maxX),l=Math.max(o.bottom,s.maxY);o.setTo(c,h,u-c,l-h)}Region.release(s)}this.lastRect=o,t.setTo(o.x,o.y,o.width,o.height),egret.Rectangle.release(o)}else this.lastRect&&(o=this.lastRect,t.setTo(o.x,o.y,o.width,o.height),egret.Rectangle.release(o),this.lastRect=null)},n.prototype.setCurrentParticles=function(t){if(!egret.nativeRender)for(var e=this.numParticles;t>e&&this.numParticles<this.maxParticles;e++)this.addOneParticle()},n.prototype.changeTexture=function(t){this.texture!=t&&(this.texture=t,egret.nativeRender?this.$nativeDisplayObject.setBitmapDataToParticle(t):(this.bitmapNodeList.length=0,this.$renderNode.drawData.length=0))},n.prototype.clear=function(){for(;this.particles.length;)this.removeParticle(this.particles[0]);this.numParticles=0,this.$renderNode.drawData.length=0,this.bitmapNodeList.length=0,this.$renderDirty=!0},n.prototype.addOneParticle=function(){var t=this.getParticle();this.initParticle(t),t.totalTime>0&&(this.particles.push(t),this.numParticles++)},n.prototype.advanceParticle=function(t,e){t.y-=e/6},n.prototype.$updateRenderNode=function(){if(!egret.nativeRender&&this.numParticles>0)for(var t,e=this.texture,n=Math.round(e.$getScaleBitmapWidth()),i=Math.round(e.$getScaleBitmapHeight()),r=e.$offsetX,o=e.$offsetY,a=e.$bitmapX,s=e.$bitmapY,c=e.$bitmapWidth,h=e.$bitmapHeight,u=0;u<this.numParticles;u++){t=this.particles[u];var l;this.bitmapNodeList[u]||(l=new egret.sys.BitmapNode,this.bitmapNodeList[u]=l,this.$renderNode.addNode(this.bitmapNodeList[u]),l.image=e.$bitmapData,l.imageWidth=e.$sourceWidth,l.imageHeight=e.$sourceHeight,l.drawImage(a,s,c,h,r,o,n,i)),l=this.bitmapNodeList[u],l.matrix=t.$getMatrix(n/2,i/2),l.blendMode=t.blendMode,l.alpha=t.alpha}},n.prototype.appendTransform=function(t,e,n,i,r,o,a,s,c,h){if(o%360)var u=o,l=egret.NumberUtils.cos(u),p=egret.NumberUtils.sin(u);else l=1,p=0;return a||s?(t.append(egret.NumberUtils.cos(s),egret.NumberUtils.sin(s),-egret.NumberUtils.sin(a),egret.NumberUtils.cos(a),e,n),t.append(l*i,p*i,-p*r,l*r,0,0)):t.append(l*i,p*i,-p*r,l*r,e,n),(c||h)&&(t.tx-=c*t.a+h*t.c,t.ty-=c*t.b+h*t.d),t},n}(egret.DisplayObject);t.ParticleSystem=e,__reflect(e.prototype,"particle.ParticleSystem")}(particle||(particle={}));var regionPool=[],Region=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0}return t.release=function(t){regionPool.push(t)},t.create=function(){var e=regionPool.pop();return e||(e=new t),e},t.prototype.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},t.prototype.updateRegion=function(t,e){if(0==t.width||0==t.height)return void this.setEmpty();var n,i,r,o,a=e,s=a.a,c=a.b,h=a.c,u=a.d,l=a.tx,p=a.ty,f=t.x,g=t.y,d=f+t.width,m=g+t.height;if(1==s&&0==c&&0==h&&1==u)n=f+l-1,i=g+p-1,r=d+l+1,o=m+p+1;else{var y=s*f+h*g+l,_=c*f+u*g+p,v=s*d+h*g+l,C=c*d+u*g+p,S=s*d+h*m+l,E=c*d+u*m+p,b=s*f+h*m+l,T=c*f+u*m+p,A=0;y>v&&(A=y,y=v,v=A),S>b&&(A=S,S=b,b=A),n=(S>y?y:S)-1,r=(v>b?v:b)+1,_>C&&(A=_,_=C,C=A),E>T&&(A=E,E=T,T=A),i=(E>_?_:E)-1,o=(C>T?C:T)+1}this.minX=n,this.minY=i,this.maxX=r,this.maxY=o,this.width=r-n,this.height=o-i,this.area=this.width*this.height},t}();__reflect(Region.prototype,"Region");var BaseSound=function(){function t(){this._cache={},this._loadingCache=new Array,App.TimerManager.doTimer(6e4,0,this.dealSoundTimer,this)}return t.prototype.dealSoundTimer=function(){for(var t=egret.getTimer(),e=Object.keys(this._cache),n=0,i=e.length;i>n;n++){var r=e[n];this.checkCanClear(r)&&t-this._cache[r]>=SoundManager.CLEAR_TIME&&(delete this._cache[r],RES.destroyRes(r))}},t.prototype.getSound=function(t){var e=RES.getRes(t);if(e)this._cache[t]&&(this._cache[t]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(t))return null;this._loadingCache.push(t),RES.getResAsync(t,this.onResourceLoadComplete,this)}return e},t.prototype.onResourceLoadComplete=function(t,e){var n=this._loadingCache.indexOf(e);-1!=n&&(this._loadingCache.splice(n,1),this._cache[e]=egret.getTimer(),this.loadedPlay(e))},t.prototype.loadedPlay=function(t){},t.prototype.checkCanClear=function(t){return!0},t}();__reflect(BaseSound.prototype,"BaseSound");var StateEui=function(t){function e(e){var n=t.call(this)||this;return"function"!=typeof e?(console.error("skinName请使用类名"),n):(n.skinClass=e,n.percentHeight=100,n.percentWidth=100,n)}return __extends(e,t),e.prototype.addToParent=function(t,e){this.showParam=e,t.addChild(this),this.isInit?this.show(this.showParam):(this.once(eui.UIEvent.COMPLETE,this.initComplate,this),this.skinName=this.skinClass)},e.prototype.initComplate=function(){this.skinClass=null,this.init(),this.stage&&this.show(this.showParam)},e.prototype.init=function(){this.isInit=!0},e.prototype.show=function(t){this.addMesssgaeListener()},e.prototype.addMesssgaeListener=function(){},e.prototype.next=function(t,e){this.dispatchEvent(new StateEvent(StateEvent.NEXT,t,e))},e.prototype.popup=function(t,e){this.dispatchEvent(new StateEvent(StateEvent.POPUP,t,e))},e.prototype.returnToLast=function(t){this.dispatchEvent(new StateEvent(StateEvent.LAST,null,t))},e.prototype.tick=function(t){},e.prototype.close=function(){this.parent&&(this.isPopup&&this.dispatchEvent(new StateEvent(StateEvent.POPUPCLOSE,null,null)),this.parent.removeChild(this),this.dispose())},e.prototype.dispose=function(){App.MessageCenter.removeAll(this),App.TimerManager.removeAll(this),this.showParam=null},e}(eui.Component);__reflect(StateEui.prototype,"StateEui",["IState","egret.IEventDispatcher"]);var ByteArrayMsg=function(){function t(){this._msgBuffer=new egret.ByteArray}return t.prototype.receive=function(t){t.readBytes(this._msgBuffer);var e=this.decode(this._msgBuffer);e&&App.MessageCenter.dispatch(e.key,e.body),0==this._msgBuffer.bytesAvailable&&this._msgBuffer.clear()},t.prototype.send=function(t,e){var n=this.encode(e);n&&(n.position=0,t.writeBytes(n,0,n.bytesAvailable))},t.prototype.decode=function(t){return console.log("decode需要子类重写，根据项目的协议结构解析"),null},t.prototype.encode=function(t){return console.log("encode需要子类重写，根据项目的协议结构解析"),null},t}();__reflect(ByteArrayMsg.prototype,"ByteArrayMsg",["BaseMsg"]);var EuiItemRenderer=function(t){function e(e){var n=t.call(this)||this;return"function"!=typeof e?(console.error("skinName请使用类名"),n):(n.skinName=e,n)}return __extends(e,t),e}(eui.ItemRenderer);__reflect(EuiItemRenderer.prototype,"EuiItemRenderer");var HotspotBitmap=function(t){function e(){var e=t.call(this)||this;return e._hotspot=[],e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouch,e),e}return __extends(e,t),e.prototype.addHotspotArea=function(t,e,n,i){this._hotspot.push({rect:t,callBack:e,thisObj:n,para:i})},e.prototype.onTouch=function(t){for(var e,n=t.localX,i=t.localY,r=0;r<this._hotspot.length;r++)e=this._hotspot[r],e.rect.contains(n,i)&&(e.para?e.callBack.call(e.thisObj,e.para):e.callBack.call(e.thisObj))},e}(egret.Bitmap);__reflect(HotspotBitmap.prototype,"HotspotBitmap");var DBArmature=function(t){function e(e){var n=t.call(this)||this;return n._displayEvents=[],n._armature=e,n._armatureDisplay=e.display,n.dealClock(n),n.addChild(n._armatureDisplay),n}return __extends(e,t),e.prototype.dealClock=function(t){var e=this,n=t.$onAddToStage.bind(t);t.$onAddToStage=function(t,i){n(t,i),e.$addToClock()};var i=t.$onRemoveFromStage.bind(t);t.$onRemoveFromStage=function(){i(),e.$removeFromClock()}},e.prototype.addToClock=function(t){this._curClock||(this._curClock=t,this._curClock.add(this._armature))},e.prototype.$addToClock=function(){this.addToClock(dragonBones.EgretFactory.factory.clock)},e.prototype.$removeFromClock=function(){this._curClock&&(this._curClock.remove(this._armature),this._curClock=null)},e.prototype.getRunDbNum=function(){var t=dragonBones.EgretFactory.factory.clock._animatebles,e={};return t.forEach(function(t){if(t){var n=t.armatureData.name;e[n]||(e[n]=0),e[n]++}}),JSON.stringify(e)},e.prototype.gotoAndStop=function(t){this._currAction=t,this._armature.animation.gotoAndStopByFrame(t)},e.prototype.gotoAndStopByTime=function(t,e){this._currAction=t,this._armature.animation.gotoAndStopByTime(t,e)},e.prototype.gotoAndStopByProgress=function(t,e){this._currAction=t,this._armature.animation.gotoAndStopByProgress(t,e)},e.prototype.play=function(t,e){return void 0===e&&(e=0),this._currAction=t,this._armature.animation.play(t,e)},Object.defineProperty(e.prototype,"currAction",{get:function(){return this._currAction},enumerable:!0,configurable:!0}),e.prototype.stop=function(){this._armature.animation.stop()},e.prototype.replaceSlot=function(t,e){var n=this._armature.getSlot(t);n&&(n.display=e)},e.prototype.replaceTexture=function(t){this._armature.replaceTexture(t)},e.prototype.replaceSkin=function(t){AssetManager.dbFactory.replaceSkin(this._armature,t)},Object.defineProperty(e.prototype,"armatureName",{get:function(){return this._armature.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._armature.animation.timeScale},set:function(t){this._armature&&(this._armature.animation.timeScale=t)},enumerable:!0,configurable:!0}),e.prototype.getSlot=function(t){return this._armature.getSlot(t)},e.prototype.getBone=function(t){return this._armature.getBone(t)},e.prototype.once=function(t,e,n){this._armatureDisplay.once(t,e,n)},e.prototype.addDisplayEvent=function(t,e,n){this._armatureDisplay.addEvent(t,e,n),this._displayEvents.push([t,e,n])},e.prototype.removeDisplayEvent=function(t,e,n){this._armatureDisplay.removeEvent(t,e,n)},e.prototype.removeAllDisplayEvent=function(){for(;this._displayEvents.length;){var t=this._displayEvents.pop();this.removeDisplayEvent(t[0],t[1],t[2])}},e.prototype.dispose=function(){this._armature&&(AssetManager.removeCacheArmature(this),this.$removeFromClock(),this.removeAllDisplayEvent(),egret.Tween.removeTweens(this),App.DisplayUtils.removeFromParent(this),App.DisplayUtils.removeFromParent(this._armatureDisplay),this._armature.dispose(),this._armature=null,this._armatureDisplay=null)},e}(egret.DisplayObjectContainer);__reflect(DBArmature.prototype,"DBArmature");var DynamicChange=function(){function t(){this._dataCache=[],this._pUpdate=new ProxyUpdate(this._dataCache)}return Object.defineProperty(t.prototype,"pUpdate",{get:function(){return this._pUpdate},enumerable:!0,configurable:!0}),t.prototype.getCacheData=function(t){return this._dataCache[t]?this._dataCache[t]:null},t.prototype.clearCache=function(){for(var t=Object.keys(this._dataCache),e=0,n=t.length;n>e;e++){var i=t[e];this._dataCache[i]=null,delete this._dataCache[i]}},t.prototype.getCacheKeyInfos=function(){for(var t=[],e=Object.keys(this._dataCache),n=0,i=e.length;i>n;n++){var r=e[n],o=this._dataCache[r];t.push(o)}return t},t.prototype.isCache=function(t){return this._dataCache[t]},t}();__reflect(DynamicChange.prototype,"DynamicChange");var ProxyUpdate=function(){function t(t){this._cache=t}return t.prototype.isArray=function(t){return t instanceof Array},t.prototype.isObject=function(t){return t.indexOf("object")>-1},t.prototype.isNormal=function(t){var e=t.indexOf("@")>-1,n=t.indexOf(".")>-1,i=t.indexOf("_")>-1;return!e&&!n&&!i},t.prototype.isAddToArray=function(t){return"@a"==t},t.prototype.isRemoveToArray=function(t){var e=t.split("_");return e.length<=3&&"@d"==e[0]},t.prototype.isFilter=function(t){var e=t.split("_");return"@f"==e[0]},t.prototype.isNumeric=function(t){return parseFloat(t).toString()==t.toString()},t.prototype._updateObject=function(t,e,n){var i=t.split(".");"@a"==i[0]||"@s"==i[0]?n[i[1]]=e:"@d"==i[0]&&delete n[i[1]]},t.prototype._getFilterObject=function(t,e){if(e){var n=t.split("_");if(3==n.length&&"@f"==n[0]&&this.isArray(e))for(var i=n[1],r=n[2],o=0;o<e.length;o++){var a=e[o];if(3==n.length&&this.isObject(a.toString())){var s=a[i];if(s&&("@"==r[0]&&(r=r.replace("@","")),r==s))return a}}}return null},t.prototype._addObjectToArray=function(t,e){if(this.isArray(e))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e)},t.prototype._removeObjectFromArray=function(t,e,n){var i=e.split("_");if(i.length<=3&&"@d"==i[0]&&this.isArray(t))for(var r=t.length,o=r-1;o>=0;o--){var a=t[o];if(3==i.length){if(a.hasOwnProperty(i[1])){var s=i[2];"@"==s[0]&&(s=s.replace("@","")),s==a[i[1]]&&t.splice(o,1)}}else 2==i.length&&a.hasOwnProperty(i[1])?n==a[i[1]]&&t.splice(o,1):1==i.length&&n==a&&t.splice(o,1)}},t.prototype.update=function(t,e){if(this._cache[t]=e,e.hasOwnProperty("c"))for(var n=e.c,i=Object.keys(n),r=0,o=i.length;o>r;r++){var a=i[r];this._cache[a]&&(this._update(this._cache[a],n[a]),App.MessageCenter.dispatch(a+"_HttpUpdate"))}},t.prototype._update=function(t,e){if(t&&e&&this.isObject(e.toString()))for(var n=Object.keys(e),i=0,r=n.length;r>i;i++){var o=n[i],a=e[o];if(this.isNormal(o)&&this.isObject(a.toString()))t.hasOwnProperty(o)&&this._update(t[o],a);else if(this.isNormal(o)&&this.isNumeric(a)){var s=t[o];t[o]=s+a}else if(this.isNormal(o))t[o]=a;else if(this.isAddToArray(o))this._addObjectToArray(t,a);else if(this.isRemoveToArray(o))this._removeObjectFromArray(t,o,a);else if(this.isFilter(o)){var c=this._getFilterObject(o,t);c&&this._update(c,a)}else this._updateObject(o,a,t)}},t}();__reflect(ProxyUpdate.prototype,"ProxyUpdate");var Http=function(t){function e(){var e=t.call(this)||this;return e._data=new DynamicChange,e._cache=[],e._request=new egret.URLRequest,e._request.method=egret.URLRequestMethod.GET,e._urlLoader=new egret.URLLoader,e._urlLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,e.onError,e),e}return __extends(e,t),e.prototype.initServer=function(t){this._serverUrl=t},Object.defineProperty(e.prototype,"serverUrl",{get:function(){return this._serverUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.onError=function(t){this.nextPost(),App.MessageCenter.dispatch(HttpConst.HTTP_NOCONNECT)},e.prototype.send=function(t,e,n){this._cache.push([t,e,n]),this.post()},e.prototype.post=function(){if(!this._isRequesting&&0!=this._cache.length){var t=this._cache.shift();this._type=t[0];var e=t[1];this._typeCallBack=t[2],this._request.url=this._serverUrl,this._request.data=e,this._urlLoader.addEventListener(egret.Event.COMPLETE,this.onLoaderComplete,this),this._urlLoader.load(this._request),this._isRequesting=!0}},e.prototype.onLoaderComplete=function(t){this._urlLoader.removeEventListener(egret.Event.COMPLETE,this.onLoaderComplete,this);var e=JSON.parse(this._urlLoader.data);e.hasOwnProperty("s")&&0!=e.s?Log.trace("Http错误:"+e.s):(this._data.pUpdate.update(this._type,e),this._typeCallBack&&this._typeCallBack(e)),this._type=null,this._typeCallBack=null,this.nextPost()},e.prototype.nextPost=function(){this._isRequesting=!1,this.post()},e}(BaseClass);__reflect(Http.prototype,"Http");var HttpConst=function(){function t(){}return t.HTTP_NOCONNECT="HTTP_NOCONNECT",t}();__reflect(HttpConst.prototype,"HttpConst");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function r(t){e.call(i,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ByteArrayMsgByProto=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.decode=function(t){if(t.position=0,0==t.bytesAvailable)return console.log("收到空消息"),null;var e=t.readUnsignedShort();if(t.bytesAvailable>=e){var n=new egret.ByteArray;t.readBytes(n,0,e);var i=App.Proto.decode(n),r={};return r.key=i.msgId.toString(),r.body=i,r}return null},e.prototype.encode=function(t){var e=t.encode(),n=e.length,i=new egret.ByteArray;return i.writeUnsignedShort(n),i.writeBytes(e),i},e}(ByteArrayMsg);__reflect(ByteArrayMsgByProto.prototype,"ByteArrayMsgByProto");var MessageCenter=function(){function t(t){this.dict=null,this.type=0,this.type=t,this.dict={},this.eVec=new Array,this.lastRunTime=0,0==this.type&&egret.startTick(this.run,this)}return t.getInstance=function(){return t._instance?t._instance:t._instance=new t(1)},t.prototype.addListener=function(t,e,n){var i=this.dict[t];null==i&&(i=new Array,this.dict[t]=i);var r=0,o=i.length;for(r;o>r;r++)if(i[r][0]==e&&i[r][1]==n)return;i.push([e,n])},t.prototype.removeListener=function(t,e,n){var i=this.dict[t];if(null!=i){var r=0,o=i.length;for(r;o>r;r++)if(i[r][0]==e&&i[r][1]==n){i.splice(r,1);break}0==i.length&&(this.dict[t]=null,delete this.dict[t])}},t.prototype.removeAll=function(t){for(var e=Object.keys(this.dict),n=0,i=e.length;i>n;n++){for(var r=e[n],o=this.dict[r],a=0;a<o.length;a++)o[a][1]==t&&(o.splice(a,1),a--);0==o.length&&(this.dict[r]=null,delete this.dict[r])}},t.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null!=this.dict[t]){var i=new MessageVo;i.type=t,i.param=e,0==this.type?this.eVec.push(i):1==this.type?this.dealMsg(i):console.log("MessageCenter未实现的类型")}},t.prototype.run=function(t){var e=egret.getTimer(),n=e-this.lastRunTime>100;if(this.lastRunTime=e,n)for(;this.eVec.length>0;)this.dealMsg(this.eVec.shift());else for(;this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-e>5)););return!0},t.prototype.dealMsg=function(t){for(var e=this.dict[t.type],n=0,i=e.length,r=null;i>n;)r=e[n],r[0].apply(r[1],t.param),e.length!=i&&(i=e.length,n--),n++;t.dispose(),t=null},t._instance=null,t}();__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function t(){this.type=null,this.param=null}return t.prototype.dispose=function(){this.type=null,this.param=null},t}();__reflect(MessageVo.prototype,"MessageVo");var Socket=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._needReconnect=!0,e}return __extends(e,t),e.prototype.addEvents=function(){this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this._socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this._socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this)},e.prototype.removeEvents=function(){this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this._socket.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this._socket.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this)},e.prototype.onSocketOpen=function(){this._isConnecting=!0,this._isConnected?App.MessageCenter.dispatch(SocketConst.SOCKET_RECONNECT):App.MessageCenter.dispatch(SocketConst.SOCKET_CONNECT),this._isConnected=!0},e.prototype.onSocketClose=function(){this._needReconnect?this.reconnect():(this.removeEvents(),App.MessageCenter.dispatch(SocketConst.SOCKET_CLOSE)),this._isConnecting=!1},e.prototype.onSocketError=function(){this._needReconnect?this.reconnect():(this.removeEvents(),App.MessageCenter.dispatch(SocketConst.SOCKET_NOCONNECT)),this._isConnecting=!1},e.prototype.onReceiveMessage=function(t){this._msg.receive(this._socket)},e.prototype.initServer=function(t,e,n,i,r){void 0===r&&(r=!0),this._host=t,this._port=e,this._useSSL=n,this._msg=i,this._needReconnect=r},e.prototype.connect=function(){this._isConnecting&&this.close(),this._socket=new egret.WebSocket,this._msg instanceof ByteArrayMsg&&(this._socket.type=egret.WebSocket.TYPE_BINARY),this.addEvents(),this._useSSL?this._socket.connectByUrl("wss://"+this._host+":"+this._port):this._socket.connectByUrl("ws://"+this._host+":"+this._port)},e.prototype.reconnect=function(){App.TimerManager.remove(this.connect,this),App.MessageCenter.dispatch(SocketConst.SOCKET_START_RECONNECT),App.TimerManager.doTimer(1e3,1,this.connect,this)},e.prototype.send=function(t){return this._isConnecting?void this._msg.send(this._socket,t):void console.log("socket尚未连接！")},e.prototype.close=function(){this._socket.close()},e.prototype.isConnecting=function(){return this._isConnecting},e.prototype.isConnected=function(){return this._isConnected},e.prototype.debugInfo=function(t){App.MessageCenter.dispatch(SocketConst.SOCKET_DEBUG_INFO,t)},e}(BaseClass);__reflect(Socket.prototype,"Socket");var SocketConst=function(){function t(){}return t.SOCKET_CONNECT="SOCKET_CONNECT",t.SOCKET_RECONNECT="SOCKET_RECONNECT",t.SOCKET_START_RECONNECT="SOCKET_START_RECONNECT",t.SOCKET_CLOSE="SOCKET_CLOSE",t.SOCKET_DATA="SOCKET_DATA",t.SOCKET_NOCONNECT="SOCKET_NOCONNECT",t.SOCKET_DEBUG_INFO="SOCKET_DEBUG_INFO",t}();__reflect(SocketConst.prototype,"SocketConst");var ThemeAdapterWx=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){egret.callLater(function(){e.call(i,generateEUI)},this)},t}();__reflect(ThemeAdapterWx.prototype,"ThemeAdapterWx",["eui.IThemeAdapter"]);var UTFMsgByJson=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.decode=function(t){return JSON.parse(t)},e.prototype.encode=function(t){return JSON.stringify(t)},e}(UTFMsg);__reflect(UTFMsgByJson.prototype,"UTFMsgByJson");var particle;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.reset=function(){t.prototype.reset.call(this),this.startX=0,this.startY=0,this.velocityX=0,this.velocityY=0,this.radialAcceleration=0,this.tangentialAcceleration=0,this.rotationDelta=0,this.scaleDelta=0},e}(t.Particle);t.GravityParticle=e,__reflect(e.prototype,"particle.GravityParticle")}(particle||(particle={}));var particle;!function(t){var e=function(e){function n(n,i){var r=e.call(this,n,200)||this;return r.$init=!1,r.parseConfig(i),r.emissionRate=r.lifespan/r.maxParticles,r.particleClass=t.GravityParticle,r.$init=!0,r}return __extends(n,e),n.prototype.start=function(t){if(void 0===t&&(t=-1),egret.nativeRender){0!=this.emissionRate&&(this.emissionTime=t),this.$particleConfig[2]=t;var n=[],i=0;for(var r in this.$particleConfig)n.push(i++),n.push(this.$particleConfig[r]);this.$nativeDisplayObject.setCustomData(n)}else e.prototype.start.call(this,t)},n.prototype.setCurrentParticles=function(t){if(!(t>this.maxParticles)){var e=[];e.push(35),e.push(t),this.$nativeDisplayObject.setCustomData(e)}},n.prototype.onPropertyChanges=function(){if(0!=this.$init){var t=[];t.push(0),this.$particleConfig[0]=this._emitterX,t.push(this._emitterX),t.push(1),this.$particleConfig[1]=this._emitterY,t.push(this._emitterY),this.relativeContentBounds&&(t.push(31),this.$particleConfig[31]=this.relativeContentBounds.x,t.push(this.relativeContentBounds.x),t.push(32),this.$particleConfig[32]=this.relativeContentBounds.y,t.push(this.relativeContentBounds.y),t.push(33),this.$particleConfig[33]=this.relativeContentBounds.width,t.push(this.relativeContentBounds.width),t.push(34),this.$particleConfig[34]=this.relativeContentBounds.height,t.push(this.relativeContentBounds.height)),this.$nativeDisplayObject.setCustomData(t)}},n.prototype.parseConfig=function(t){function e(t){return"undefined"==typeof t?0:t}if(egret.nativeRender?(this._emitterX=e(t.emitter.x),this._emitterY=e(t.emitter.y)):(this.emitterX=e(t.emitter.x),this.emitterY=e(t.emitter.y)),this.emitterXVariance=e(t.emitterVariance.x),this.emitterYVariance=e(t.emitterVariance.y),this.gravityX=e(t.gravity.x),this.gravityY=e(t.gravity.y),1==t.useEmitterRect){var n=new egret.Rectangle;n.x=e(t.emitterRect.x),n.y=e(t.emitterRect.y),n.width=e(t.emitterRect.width),n.height=e(t.emitterRect.height),this.emitterBounds=n}this.maxParticles=e(t.maxParticles),this.speed=e(t.speed),this.speedVariance=e(t.speedVariance),this.lifespan=Math.max(.01,e(t.lifespan)),this.lifespanVariance=e(t.lifespanVariance),this.emitAngle=e(t.emitAngle),this.emitAngleVariance=e(t.emitAngleVariance),this.startSize=e(t.startSize),this.startSizeVariance=e(t.startSizeVariance),this.endSize=e(t.endSize),this.endSizeVariance=e(t.endSizeVariance),this.startRotation=e(t.startRotation),this.startRotationVariance=e(t.startRotationVariance),this.endRotation=e(t.endRotation),this.endRotationVariance=e(t.endRotationVariance),this.radialAcceleration=e(t.radialAcceleration),this.radialAccelerationVariance=e(t.radialAccelerationVariance),this.tangentialAcceleration=e(t.tangentialAcceleration),this.tangentialAccelerationVariance=e(t.tangentialAccelerationVariance),this.startAlpha=e(t.startAlpha),this.startAlphaVariance=e(t.startAlphaVariance),this.endAlpha=e(t.endAlpha),this.endAlphaVariance=e(t.endAlphaVariance),egret.nativeRender?t.blendMode&&(this.particleBlendMode=t.blendMode):this.particleBlendMode=t.blendMode,this.$particleConfig={0:this.emitterX,1:this.emitterY,2:-1,3:this.maxParticles,4:this.emitterXVariance,5:this.emitterYVariance,6:this.gravityX,7:this.gravityY,8:this.speed,9:this.speedVariance,10:this.lifespan,11:this.lifespanVariance,12:this.emitAngle,13:this.emitAngleVariance,14:this.startSize,15:this.startSizeVariance,16:this.endSize,17:this.endSizeVariance,18:this.startRotation,19:this.startRotationVariance,20:this.endRotation,21:this.endRotationVariance,22:this.radialAcceleration,23:this.radialAccelerationVariance,24:this.tangentialAcceleration,25:this.tangentialAccelerationVariance,26:this.startAlpha,27:this.startAlphaVariance,28:this.endAlpha,29:this.endAlphaVariance,30:this.particleBlendMode,31:t.useEmitterRect?this.relativeContentBounds.x:0,32:t.useEmitterRect?this.relativeContentBounds.y:0,33:t.useEmitterRect?this.relativeContentBounds.width:0,34:t.useEmitterRect?this.relativeContentBounds.height:0,35:0}},n.prototype.initParticle=function(t){var e=t,i=n.getValue(this.lifespan,this.lifespanVariance);if(e.currentTime=0,e.totalTime=i>0?i:0,!(0>=i)){e.x=n.getValue(this.emitterX,this.emitterXVariance),e.y=n.getValue(this.emitterY,this.emitterYVariance),e.startX=this.emitterX,e.startY=this.emitterY;
var r=n.getValue(this.emitAngle,this.emitAngleVariance),o=n.getValue(this.speed,this.speedVariance);e.velocityX=o*egret.NumberUtils.cos(r),e.velocityY=o*egret.NumberUtils.sin(r),e.radialAcceleration=n.getValue(this.radialAcceleration,this.radialAccelerationVariance),e.tangentialAcceleration=n.getValue(this.tangentialAcceleration,this.tangentialAccelerationVariance);var a=n.getValue(this.startSize,this.startSizeVariance);.1>a&&(a=.1);var s=n.getValue(this.endSize,this.endSizeVariance);.1>s&&(s=.1);var c=this.texture.textureWidth;e.scale=a/c,e.scaleDelta=(s-a)/i/c;var h=n.getValue(this.startRotation,this.startRotationVariance),u=n.getValue(this.endRotation,this.endRotationVariance);e.rotation=h,e.rotationDelta=(u-h)/i;var l=n.getValue(this.startAlpha,this.startAlphaVariance),p=n.getValue(this.endAlpha,this.endAlphaVariance);e.alpha=l,e.alphaDelta=(p-l)/i,e.blendMode=this.particleBlendMode}},n.getValue=function(t,e){return t+e*(2*Math.random()-1)},n.prototype.advanceParticle=function(t,e){var n=t;e/=1e3;var i=n.totalTime-n.currentTime;e=i>e?e:i,n.currentTime+=e;var r=n.x-n.startX,o=n.y-n.startY,a=Math.sqrt(r*r+o*o);.01>a&&(a=.01);var s=r/a,c=o/a,h=s,u=c;s*=n.radialAcceleration,c*=n.radialAcceleration;var l=h;h=-u*n.tangentialAcceleration,u=l*n.tangentialAcceleration,n.velocityX+=e*(this.gravityX+s+h),n.velocityY+=e*(this.gravityY+c+u),n.x+=n.velocityX*e,n.y+=n.velocityY*e,n.scale+=n.scaleDelta*e*1e3,n.scale<0&&(n.scale=0),n.rotation+=n.rotationDelta*e*1e3,n.alpha+=n.alphaDelta*e*1e3},n}(t.ParticleSystem);t.GravityParticleSystem=e,__reflect(e.prototype,"particle.GravityParticleSystem")}(particle||(particle={}));var LanguageType=function(){function t(){}return t.En="_En",t.Ch="",t}();__reflect(LanguageType.prototype,"LanguageType");var App=function(){function t(){}return Object.defineProperty(t,"MessageCenter",{get:function(){return MessageCenter.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Socket",{get:function(){return Socket.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Http",{get:function(){return Http.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DebugUtils",{get:function(){return DebugUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ClickAnimation",{get:function(){return ClickAnimation.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CommonUtils",{get:function(){return CommonUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DisplayUtils",{get:function(){return DisplayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RandomUtils",{get:function(){return RandomUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RectangleUtils",{get:function(){return RectangleUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GameWidth",{get:function(){return t.StageUtils.getWidth()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GameHeight",{get:function(){return t.StageUtils.getHeight()},enumerable:!0,configurable:!0}),t.Proto=null,t.Language=LanguageType.Ch,t.UserToken="",t.CurrChatId="",t.CurrGameId=1,t.CurrGameIsAi=!1,t.CurrGameAiLevel=3,t.CurrRoomId="",t.CurrPlatformUid="",t.IsLocal=!1,t.IsXiaoMi=!1,t.IsFaceBook=!1,t.IsWanba=!1,t.IsLiaoZhan=!1,t}();__reflect(App.prototype,"App");var AnimationButton=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.getCurrentState=function(){var e=t.prototype.getCurrentState.call(this);return"down"==e?this.scaleX=this.scaleY=.9:"up"==e&&(this.scaleX=this.scaleY=1),e},e}(eui.Button);__reflect(AnimationButton.prototype,"AnimationButton",["eui.UIComponent","egret.DisplayObject"]);var BitmapNumber=function(t){function e(){var e=t.call(this)||this;return e._imgPool=[],e._containerPool=[],e}return __extends(e,t),e.prototype.createNumPic=function(t,e){var n,i=this.getContainer(),r=t.toString(),o=0;for(o;o<r.length;o++)n=this.getSingleNumPic(r.charAt(o),e),i.addChild(n);return this.repositionNumPic(i),i},e.prototype.desstroyNumPic=function(t){this.clearContainer(t),t.parent&&t.parent.removeChild(t),this._containerPool.push(t)},e.prototype.changeNum=function(t,e,n){var i=e.toString();if(t.numChildren>i.length)for(;t.numChildren>i.length;)this.recycleBM(t.getChildAt(t.numChildren-1));var r,o=0;for(o;o<i.length;o++)o>=t.numChildren&&t.addChild(this.getBitmap()),r=i.charAt(o),r="."==r?"dot":r,t.getChildAt(o).texture=this.getTexture(r,n);this.repositionNumPic(t)},e.prototype.repositionNumPic=function(t){var e,n=0,i=0;for(n;n<t.numChildren;n++)e=t.getChildAt(n),e.x=i,i=e.x+e.width},e.prototype.clearContainer=function(t){for(;t.numChildren;)this.recycleBM(t.removeChildAt(0))},e.prototype.recycleBM=function(t){t&&t.parent&&(t.parent.removeChild(t),t.texture=null,this._imgPool.push(t))},e.prototype.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},e.prototype.getSingleNumPic=function(t,e){"."==t&&(t="dot");var n=this.getBitmap();return n.texture=this.getTexture(t,e),n},e.prototype.getTexture=function(t,e){return RES.getRes(e+t)},e.prototype.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},e}(BaseClass);__reflect(BitmapNumber.prototype,"BitmapNumber");var SoundBg=function(t){function e(){var e=t.call(this)||this;return e._currBg="",e}return __extends(e,t),e.prototype.mute=function(){this._currSoundChannel&&(this._currSoundChannel.volume=0)},e.prototype.restoreVolume=function(){this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},e.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg=""},e.prototype.play=function(t,e){if(void 0===e&&(e=0),this._currBg!=t){this.stop(),this._currBg=t,this._currPlayTime=e;var n=this.getSound(t);n&&this.playSound(n)}},e.prototype.playSound=function(t){this._currSound=t,this._currSoundChannel=this._currSound.play(this._currPlayTime,0),this._currSoundChannel.volume=this._volume},e.prototype.getPlayTime=function(){return this._currSoundChannel?this._currSoundChannel.position:0},e.prototype.setVolume=function(t){this._volume=t,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},e.prototype.loadedPlay=function(t){this._currBg==t&&this.playSound(RES.getRes(t))},e.prototype.checkCanClear=function(t){return this._currBg!=t},e}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(t){function e(){var e=t.call(this)||this;return e._cacheSoundChannel=[],e._playingEffects={},e}return __extends(e,t),e.prototype.play=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=1),this._playTime=n,e||!this._playingEffects[t]){var i=this.getSound(t);i&&this.playSound(t,i)}},e.prototype.getSoundChannel=function(t){var e=null;return this._cacheSoundChannel.length?(e=this._cacheSoundChannel.pop(),e.isStopped=!1,e.$url=t.url,e.$loops=this._playTime,e.$audioBuffer=t.audioBuffer,e.$startTime=0,e.$play()):e=t.play(0,this._playTime),e},e.prototype.playSound=function(t,e){var n=this.getSoundChannel(e);n.once(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),n.volume=this._volume,n.soundName=t,this._playingEffects[t]=n},e.prototype.onSoundComplete=function(t){var e=t.currentTarget,n=e.soundName;delete this._playingEffects[n]},e.prototype.stopSound=function(t){var e=this._playingEffects[t];e&&(e.stop(),delete this._playingEffects[t])},e.prototype.setVolume=function(t){this._volume=t},e.prototype.loadedPlay=function(t){this.playSound(t,RES.getRes(t))},e}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(t){function e(){var e=t.call(this)||this;return e.bgOn=!0,e.effectOn=!0,e.bgVolume=.5,e.effectVolume=.7,e.bg=new SoundBg,e.bg.setVolume(e.bgVolume),e.effect=new SoundEffects,e.effect.setVolume(e.effectVolume),e}return __extends(e,t),e.prototype.playEffect=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=1),this.effectOn&&this.effect.play(t,e,n)},e.prototype.playBg=function(t){this.currBg=t,this.bgOn&&this.bg.play(t)},e.prototype.pauseBg=function(){this.bgOn&&(this.bgPlayTime=this.bg.getPlayTime(),this.bg.stop())},e.prototype.replayBg=function(){this.bgOn&&this.bg.play(this.currBg,this.bgPlayTime)},e.prototype.stopBg=function(){this.bg.stop()},e.prototype.muteBg=function(){this.bg.mute()},e.prototype.restoreVolumeBg=function(){this.bg.restoreVolume()},e.prototype.stopEffect=function(t){this.effect.stopSound(t)},e.prototype.setEffectOn=function(t){this.effectOn=t},e.prototype.setBgOn=function(t){this.bgOn!=t&&(this.bgOn=t,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg())},e.prototype.setBgVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.bgVolume=t,this.bg.setVolume(this.bgVolume)},e.prototype.getBgVolume=function(){return this.bgVolume},e.prototype.setEffectVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.effectVolume=t,this.effect.setVolume(this.effectVolume)},e.prototype.getEffectVolume=function(){return this.effectVolume},Object.defineProperty(e.prototype,"bgIsOn",{get:function(){return this.bgOn},enumerable:!0,configurable:!0}),e.CLEAR_TIME=18e4,e}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var EuiComponent=function(t){function e(e){var n=t.call(this)||this;return"function"!=typeof e?(console.error("skinName请使用类名"),n):(n.skinName=e,n)}return __extends(e,t),e}(eui.Component);__reflect(EuiComponent.prototype,"EuiComponent");var TimerManager=function(t){function e(){var e=t.call(this)||this;return e._handlers=new Array,e._delHandlers=new Array,e._currTime=egret.getTimer(),e._currFrame=0,e._count=0,e._timeScale=1,egret.Ticker.getInstance().register(e.onEnterFrame,e),e}return __extends(e,t),e.prototype.setTimeScale=function(t){this._timeScale=t},e.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer(),App.DebugUtils.start("TimerManager:");for(var t=0;t<this._count;t++){var e=this._handlers[t],n=e.userFrame?this._currFrame:this._currTime;n>=e.exeTime&&(App.DebugUtils.start(e.method.toString()),e.method.call(e.methodObj,(this._currTime-e.dealTime)*this._timeScale),App.DebugUtils.stop(e.method.toString()),e.dealTime=this._currTime,e.exeTime+=e.delay,e.repeat||(e.repeatCount>1?e.repeatCount--:(e.complateMethod&&e.complateMethod.apply(e.complateMethodObj),this._delHandlers.push(e))))}for(;this._delHandlers.length;){var e=this._delHandlers.pop();this.remove(e.method,e.methodObj)}App.DebugUtils.stop("TimerManager:")},e.prototype.create=function(t,e,n,i,r,o,a){if(!(0>e||0>n||null==i)){this.remove(i,r);var s=ObjectPool.pop(TimerHandler,"TimerHandler");s.userFrame=t,s.repeat=0==n,s.repeatCount=n,s.delay=e,s.method=i,s.methodObj=r,s.complateMethod=o,s.complateMethodObj=a,s.exeTime=e+(t?this._currFrame:this._currTime),s.dealTime=this._currTime,this._handlers.push(s),this._count++}},e.prototype.doTimer=function(t,e,n,i,r,o){void 0===r&&(r=null),void 0===o&&(o=null),this.create(!1,t,e,n,i,r,o)},e.prototype.doFrame=function(t,e,n,i,r,o){void 0===r&&(r=null),void 0===o&&(o=null),this.create(!0,t,e,n,i,r,o)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.remove=function(t,e){for(var n=0;n<this._count;n++){var i=this._handlers[n];if(i.method==t&&i.methodObj==e){this._handlers.splice(n,1),ObjectPool.push(i),this._count--;break}}},e.prototype.removeAll=function(t){for(var e=0;e<this._count;e++){var n=this._handlers[e];n.methodObj==t&&(this._handlers.splice(e,1),ObjectPool.push(n),this._count--,e--)}},e.prototype.isExists=function(t,e){for(var n=0;n<this._count;n++){var i=this._handlers[n];if(i.method==t&&i.methodObj==e)return!0}return!1},e}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();__reflect(TimerHandler.prototype,"TimerHandler");var State=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addToParent=function(t,e){t.addChild(this),this.isInit||this.init(),this.show(e)},e.prototype.init=function(){this.isInit=!0},e.prototype.show=function(t){},e.prototype.next=function(t,e){this.dispatchEvent(new StateEvent(StateEvent.NEXT,t,e))},e.prototype.popup=function(t,e){this.dispatchEvent(new StateEvent(StateEvent.POPUP,t,e))},e.prototype.returnToLast=function(t){this.dispatchEvent(new StateEvent(StateEvent.LAST,null,t))},e.prototype.tick=function(t){},e.prototype.close=function(){this.parent&&(this.isPopup&&this.dispatchEvent(new StateEvent(StateEvent.POPUPCLOSE,null,null)),this.parent.removeChild(this),this.dispose())},e.prototype.dispose=function(){App.MessageCenter.removeAll(this),App.TimerManager.removeAll(this)},e}(egret.DisplayObjectContainer);__reflect(State.prototype,"State",["IState","egret.IEventDispatcher"]);var EasyLoading=function(){function t(){}return t.init=function(){this.content=new egret.Sprite,this.content.graphics.beginFill(0,.2),this.content.graphics.drawRect(0,0,App.StageUtils.getWidth(),App.StageUtils.getHeight()),this.content.graphics.endFill(),this.content.touchEnabled=!0,this.dbArmature=AssetManager.getDBArmature("loading"),this.dbArmature.x=.5*App.StageUtils.getWidth(),this.dbArmature.y=.5*App.StageUtils.getHeight()+30,this.dbArmature.scaleX=this.dbArmature.scaleY=1.6,this.content.addChild(this.dbArmature)},t.showLoading=function(){App.StageUtils.getStage().addChild(this.content),this.dbArmature.play("newAnimation",0)},t.hideLoading=function(){this.content&&this.content.parent&&App.StageUtils.getStage().removeChild(this.content),this.dbArmature.stop()},t.content=null,t}();__reflect(EasyLoading.prototype,"EasyLoading");var StateEuiAnimation=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.show=function(){t.prototype.show.call(this),this.showAnimationCallback&&this.doShowAnimation(this.showAnimationCallback)},e.prototype.showAnimation=function(t){this.showAnimationCallback=t},e.prototype.doShowAnimation=function(t){},e.prototype.removeAnimation=function(t){this.doRemoveAnimation(t)},e.prototype.doRemoveAnimation=function(t){},e}(StateEui);__reflect(StateEuiAnimation.prototype,"StateEuiAnimation");var StateEvent=function(t){function e(e,n,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var a=t.call(this,e,r,o)||this;return a.data=n,a.paramData=i,a}return __extends(e,t),e.NEXT="NEXT",e.LAST="LAST",e.POPUP="POPUP",e.POPUPCLOSE="POPUPCLOSE",e}(egret.Event);__reflect(StateEvent.prototype,"StateEvent");var StateManager=function(){function t(t,e,n){this._parent=t,this._euiParent=e,this._popupParent=n,this._stateObj={}}return t.prototype.startTick=function(){this._curTime=egret.getTimer(),egret.startTick(this.tick,this)},t.prototype.stopTick=function(){egret.stopTick(this.tick,this)},t.prototype.tick=function(t){return this._lastTime=this._curTime,this._curTime=t,this._curState&&this._curState.tick(this._curTime-this._lastTime),!0},t.prototype.registerState=function(t,e){this._stateObj[t]=e},t.prototype.unregisterState=function(t){var e=this._stateObj[t];e&&(this._stateObj[t]=null,delete this._stateObj[t])},t.prototype.setCurStateName=function(t,e){if(this._curStateName==t)return void this._curState.show(e);var n=this._stateObj[t];n&&this.setCurState(n,t,e)},t.prototype.addStateEvents=function(t){t.addEventListener(StateEvent.NEXT,this.onNext,this),t.addEventListener(StateEvent.LAST,this.onLast,this),t.addEventListener(StateEvent.POPUP,this.onPopup,this),t.addEventListener(StateEvent.POPUPCLOSE,this.onPopupClose,this)},t.prototype.removeStateEvents=function(t){t.removeEventListener(StateEvent.NEXT,this.onNext,this),t.removeEventListener(StateEvent.LAST,this.onLast,this),t.removeEventListener(StateEvent.POPUP,this.onPopup,this),t.removeEventListener(StateEvent.POPUPCLOSE,this.onPopupClose,this)},t.prototype.setCurState=function(t,e,n){if(this._curState==t)return void this._curState.show(n);this._curState&&(this.removeStateEvents(this._curState),this._curState.close(),this._prevState=this._curState,this._prevStateName=this._curStateName);var i=this._parent;t instanceof StateEui&&(i=this._euiParent),this._curState=t,this._curStateName=e,this.addStateEvents(this._curState),this._curState.addToParent(i,n)},t.prototype.onPopup=function(t){var e=this._stateObj[t.data];e&&(e.isPopup=!0,this.addStateEvents(e),e.addToParent(this._popupParent,t.paramData))},t.prototype.onPopupClose=function(t){var e=t.currentTarget;e&&this.removeStateEvents(e)},t.prototype.onNext=function(t){var e=this._stateObj[t.data];e&&this.setCurState(e,t.data,t.paramData)},t.prototype.onLast=function(t){this._prevState&&this.setCurState(this._prevState,this._prevStateName,t.paramData)},Object.defineProperty(t.prototype,"curState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curStateName",{get:function(){return this._curStateName},enumerable:!0,configurable:!0}),t}();__reflect(StateManager.prototype,"StateManager");var AllAsyncExecutor=function(){function t(){this._functions=new Array,this._complateNum=0}return t.prototype.setCallBack=function(t,e){this._callBack=t,this._callBackTarget=e},t.prototype.regist=function(t,e){this._functions.push([t,e])},t.prototype.start=function(){App.ArrayUtils.forEach(this._functions,function(t){t[0].call(t[1])},this)},t.prototype.complate=function(){this._functions&&(this._complateNum++,this._complateNum==this._functions.length&&(this._callBack&&this._callBack.call(this._callBackTarget),this._callBack=null,this._callBackTarget=null,this._functions=null))},t}();__reflect(AllAsyncExecutor.prototype,"AllAsyncExecutor");var AnchorUtil=function(){function t(){}return t.init=function(){t._propertyChange=Object.create(null),t._anchorChange=Object.create(null),t.injectAnchor()},t.setAnchorX=function(t,e){t.anchorX=e},t.setAnchorY=function(t,e){t.anchorY=e},t.setAnchor=function(t,e){t.anchorX=t.anchorY=e},t.getAnchor=function(t){return t.anchorX!=t.anchorY&&console.log("target's anchorX != anchorY"),t.anchorX||0},t.getAnchorY=function(t){return t.anchorY||0},t.getAnchorX=function(t){return t.anchorX||0},t.injectAnchor=function(){Object.defineProperty(egret.DisplayObject.prototype,"width",{get:function(){return this.$getWidth()},set:function(e){var n=this;this.$setWidth(e),t._propertyChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"height",{get:function(){return this.$getHeight()},set:function(e){var n=this;this.$setHeight(e),t._propertyChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorX",{get:function(){return this._anchorX},set:function(e){var n=this;this._anchorX=e,t._propertyChange[this.hashCode]=!0,t._anchorChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorY",{get:function(){return this._anchorY},set:function(e){var n=this;this._anchorY=e,t._propertyChange[this.hashCode]=!0,t._anchorChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0})},t.changeAnchor=function(e){t._propertyChange[e.hashCode]&&t._anchorChange[e.hashCode]&&(e.anchorOffsetX=e._anchorX*e.width,e.anchorOffsetY=e._anchorY*e.height,delete t._propertyChange[e.hashCode])},t}();__reflect(AnchorUtil.prototype,"AnchorUtil");var ArrayUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.forEach=function(t,e,n){for(var i=0,r=t.length;r>i;i++)e.apply(n,[t[i]])},e}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var AssetManager=function(){function t(){}return t.clearCacheList=function(t){for(var e=this.cacheDbs[t]||[];e.length;){var n=e[0];n.dispose()}delete this.cacheDbs[t]},t.removeCacheArmature=function(t){var e=t.armatureName,n=this.cacheDbs[e];if(n){var i=n.indexOf(t);-1!=i&&n.splice(i,1)}this.printCacheListCount()},t.addCacheArmature=function(t){var e=t.armatureName;this.cacheDbs[e]||(this.cacheDbs[e]=[]),this.cacheDbs[e].push(t),this.printCacheListCount()},t.printCacheListCount=function(){return},t.getBitmap=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var i=new egret.Bitmap,r=RES.getRes(t);return i.texture=r,e&&(i.anchorOffsetX=i.width>>1),n&&(i.anchorOffsetY=i.height>>1),i},t.getSound=function(t){return RES.getRes(t)},t.loadDBAnimation=function(e){var n,i,r;for(n=0,i=e.length;i>n;n++){r=e[n];var o=RES.getRes(r+"_ske_json"),a=RES.getRes(r+"_tex_json"),s=RES.getRes(r+"_tex_png");o&&a&&s&&(t.dbFactory.parseDragonBonesData(o),t.dbFactory.parseTextureAtlasData(a,s))}},t.removeDBAnimation=function(e){var n,i,r;for(n=0,i=e.length;i>n;n++){r=e[n];var o=RES.getRes(r+"_ske_json");if(o){var a=o.name,s=t.dbFactory.getDragonBonesData(a);t.dbFactory.removeDragonBonesData(a),t.dbFactory.removeTextureAtlasData(a);for(var c in s.armatures)this.clearCacheList(c)}}},t.getDBArmature=function(e){var n=t.dbFactory.buildArmature(e);if(!n)return null;var i=new DBArmature(n);return this.addCacheArmature(i),i},t.getQuickDBArmature=function(e){var n=t.dbFactory.buildArmature(e);if(!n)return null;n.cacheFrameRate=30;var i=new DBArmature(n);return this.addCacheArmature(i),i},t.changeTexture=function(t,e){var n=t.width,i=t.height;t.texture=RES.getRes(e),t.width=n,t.height=i},t.setText=function(t,e){t.text=e,t.anchorOffsetX=t.width>>1,t.anchorOffsetY=t.height>>1},t.dbFactory=new dragonBones.EgretFactory,t.cacheDbs={},t}();__reflect(AssetManager.prototype,"AssetManager");var AverageUtils=function(){function t(t){void 0===t&&(t=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=t}return t.prototype.push=function(t){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(t),this.numSum+=t,this.numsLen++},t.prototype.getValue=function(){return this.numSum/this.numsLen},t.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},t}();__reflect(AverageUtils.prototype,"AverageUtils");var ClickAnimation=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.register=function(t){var e=this,n=t.$onAddToStage.bind(t);t.$onAddToStage=function(i,r){n(i,r),e.addAnimation(t)};var i=t.$onRemoveFromStage.bind(t);t.$onRemoveFromStage=function(){i(),e.ramoveAnimation(t)},t.stage&&this.addAnimation(t)},e.prototype.addAnimation=function(t){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this)},e.prototype.ramoveAnimation=function(t){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this)},e.prototype.onClickBegin=function(t){var e=t.currentTarget;egret.Tween.get(e,egret.Ease.sineOut).to({scaleX:.9,scaleY:.9},100)},e.prototype.onClickEnd=function(t){var e=t.currentTarget;egret.Tween.get(e,egret.Ease.sineOut).to({scaleX:1,scaleY:1},100)},e}(BaseClass);__reflect(ClickAnimation.prototype,"ClickAnimation");var CommonUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.addLableStrokeColor=function(t,e,n){t.strokeColor=e,t.stroke=n},e.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var n=Object.keys(t),i=0,r=n.length;r>i;i++){var o=n[i];e[o]=this.copyDataHandler(t[o])}return e},e.lock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!1},e.unlock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!0},e.int64ToNumber=function(t){return parseInt(t.toString())},e.hashCode=function(t){var e=757602046;if(!t.length)return e;for(var n=0,i=t.length;i>n;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e&=e}return e},e.hashCodeAbs=function(t){return Math.abs(this.hashCode(t))},e.labelIsOverLenght=function(t,e){var n=null;n=1e5>e?e:1e6>e?Math.floor(e/1e3/10).toString()+"万":Math.floor(e/1e4).toString()+"万",t.text=n},e}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getFormatBySecond=function(t,e){void 0===e&&(e=1);var n="";switch(e){case 1:n=this.getFormatBySecond1(t);break;case 2:n=this.getFormatBySecond2(t);break;case 3:n=this.getFormatBySecond3(t);break;case 4:n=this.getFormatBySecond4(t);break;case 5:n=this.getFormatBySecond5(t)}return n},e.prototype.getFormatBySecond1=function(t){void 0===t&&(t=0);var e,n=Math.floor(t/3600);e=0==n?"00":10>n?"0"+n:""+n;var i,r,o=Math.floor((t-3600*n)/60),a=Math.floor((t-3600*n)%60);return i=0==o?"00":10>o?"0"+o:""+o,r=0==a?"00":10>a?"0"+a:""+a,e+":"+i+":"+r},e.prototype.getFormatBySecond3=function(t){void 0===t&&(t=0);var e,n,i=Math.floor(t/3600),r=Math.floor((t-3600*i)/60),o=Math.floor((t-3600*i)%60);return e=0==r?"00":10>r?"0"+r:""+r,n=0==o?"00":10>o?"0"+o:""+o,e+":"+n},e.prototype.getFormatBySecond2=function(t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1,r=e.getDate(),o=e.getHours(),a=e.getMinutes(),s=e.getSeconds();return n+"-"+i+"-"+r+" "+o+":"+a+":"+s},e.prototype.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"},e.prototype.getFormatBySecond5=function(t){var e=86400,n=3600,i=60,r=Math.floor(t/e),o=Math.floor(t%e/n),a=Math.floor((t-o*n)/i),s=Math.floor((t-o*n)%i),c="",h="",u="",l="";return t>0?0==r?(c="",0==o?(h="",0==a?(u="",l=0==s?"":10>s?"0"+s+"秒":""+s+"秒"):(u=""+a+"分",l=0==s?"":10>s?"0"+s+"秒":""+s+"秒",u+l)):(h=o+"小时",0==a?(u="",l=0==s?"":10>s?"0"+s+"秒":""+s+"秒"):(u=10>a?"0"+a+"分":""+a+"分",h+u))):(c=r+"天",h=0==o?"":10>o?"0"+o+"小时":""+o+"小时",c+h):""},e}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var DebugUtils=function(t){function e(){var e=t.call(this)||this;return e._threshold=3,e._startTimes={},e}return __extends(e,t),e.prototype.isOpen=function(t){this._isOpen=t},Object.defineProperty(e.prototype,"isDebug",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),e.prototype.start=function(t){this._isOpen&&(this._startTimes[t]=egret.getTimer())},e.prototype.stop=function(t){if(!this._isOpen)return 0;if(!this._startTimes[t])return 0;var e=egret.getTimer()-this._startTimes[t];return e>this._threshold&&Log.trace(t+": "+e),e},e.prototype.setThreshold=function(t){this._threshold=t},e}(BaseClass);__reflect(DebugUtils.prototype,"DebugUtils");var DelayOptManager=function(t){function e(){var e=t.call(this)||this;return e.TIME_THRESHOLD=2,e._delayOpts=[],App.TimerManager.doFrame(1,0,e.runCachedFun,e),e}return __extends(e,t),e.prototype.addDelayOptFunction=function(t,e,n,i,r){this._delayOpts.push({fun:e,funPara:n,thisObj:t,callBack:i,para:r})},e.prototype.clear=function(){this._delayOpts.length=0},e.prototype.stop=function(){App.TimerManager.remove(this.runCachedFun,this)},e.prototype.runCachedFun=function(t){if(0!=this._delayOpts.length)for(var e,n=egret.getTimer();this._delayOpts.length&&(e=this._delayOpts.shift(),e.funPara?e.fun.call(e.thisObj,e.funPara):e.fun.call(e.thisObj),e.callBack&&(void 0!=e.para?e.callBack.call(e.thisObj,e.para):e.callBack()),!(egret.getTimer()-n>this.TIME_THRESHOLD)););},e}(BaseClass);__reflect(DelayOptManager.prototype,"DelayOptManager");var DisplayUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createBitmap=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},e.prototype.createEuiImage=function(t){var e=new eui.Image,n=RES.getRes(t);return e.source=n,e},e.prototype.removeFromParent=function(t){null!=t.parent&&t.parent.removeChild(t)},e.prototype.quickAddChild=function(t,e){return"true"===egret.getOption("egretnative")?void t.addChild(e):void(e.$parent!=t&&(t.$children.push(e),e.$parent=t,e instanceof DBArmature&&e.$addToClock()))},e.prototype.quickRemoveChild=function(t){if("true"===egret.getOption("egretnative"))return void this.removeFromParent(t);var e=t.$parent;if(e){var n=e.$children.indexOf(t);e.$children.splice(n,1),t.$parent=null,t instanceof DBArmature&&t.$removeFromClock()}},e}(BaseClass);__reflect(DisplayUtils.prototype,"DisplayUtils");var EffectUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.macIconShake=function(t,e){for(var n=[[20,300],[15,300],[10,300],[5,300]],i="egret.Tween.get("+t+")",r=0,o=n.length;o>r;r++)i+=".to({'y':"+e+"-"+n[r][0]+"}, "+n[r][1]+")",i+=".to({'y':"+e+"}, "+n[r][1]+")";return i+=";"},e.prototype.startFlicker=function(t,e){t.alpha=1,egret.Tween.get(t).to({alpha:0},e).to({alpha:1},e).call(this.startFlicker,this,[t,e])},e.prototype.stopFlicker=function(t){egret.Tween.removeTweens(t)},e}(BaseClass);__reflect(EffectUtils.prototype,"EffectUtils");var GameCenterGetSexIcon=function(){function t(){}return t.getSexIconSource=function(t){var e=this.girlIcon;switch(t){case 0:case 1:e=this.boyIcon;break;case 2:e=this.girlIcon}return e},t.boyIcon="img_boy_png",t.girlIcon="img_gril_png",t}();__reflect(GameCenterGetSexIcon.prototype,"GameCenterGetSexIcon");var LocationProperty=function(){function t(){}return t.getPara=function(t,e){if(egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE)return null;var n=e||location.href;if(-1!=n.indexOf("?")){var i="&"+n.split("?")[1],r=new RegExp("&"+t+"=.*?(?:&|$)"),o=r.exec(i);if(o){var a=o[0];return a.split("&")[1].split("=")[1]}}return null},t.setProperty=function(t,e,n){var i=n||location.href,r="&"+i.split("?")[1];if(-1==i.indexOf("?"))return i+="?"+t+"="+e;var r=i.split("?")[1];if(""==r)return i+=t+"="+e;var o=new RegExp("(?:^|&)"+t+"=.*?(?:&|$)"),a=o.exec(r);if(a&&""!=a[0]){var s=a[0],c=new RegExp("=.*$"),h=s.replace(c,"="+e);return i.replace(s,h)}return i+="&"+t+"="+e},t.hasProperty=function(t,e){var n=e||location.href,i="&"+n.split("?")[1];return-1!=i.indexOf("&"+t+"=")},t}();__reflect(LocationProperty.prototype,"LocationProperty");var Log=function(){function t(){}return t.trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];App.DebugUtils.isDebug&&(t[0]="[DebugLog]"+t[0],console.log.apply(console,t))},t}();__reflect(Log.prototype,"Log");var reserveDecimal;!function(t){t[t.floor=0]="floor",t[t.ceil=1]="ceil",t[t.round=2]="round"}(reserveDecimal||(reserveDecimal={}));var MathUtils=function(){function t(){}return t.reserveDecimal=function(t,e,n){void 0===n&&(n=reserveDecimal.floor);var i=Math.pow(10,e),r=t*i;switch(n){case reserveDecimal.floor:return Math.floor(r)/i;case reserveDecimal.ceil:return Math.ceil(r)/i;case reserveDecimal.round:return Math.round(r)/i}},t}();__reflect(MathUtils.prototype,"MathUtils");var ObjectPool=function(){function t(){this._objs=new Array
}return t.prototype.pushObj=function(t){this._objs.push(t)},t.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},t.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},t.pop=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];t._content[n]||(t._content[n]=[]);var o=t._content[n];if(o.length)return o.pop();var a,s=i.length;return 0==s?a=new e:1==s?a=new e(i[0]):2==s?a=new e(i[0],i[1]):3==s?a=new e(i[0],i[1],i[2]):4==s?a=new e(i[0],i[1],i[2],i[3]):5==s&&(a=new e(i[0],i[1],i[2],i[3],i[4])),a.ObjectPoolKey=n,a},t.popWithExtraKey=function(e,n){t._content[e]||(t._content[e]=[]);var i,r=t._content[e];if(r.length)for(var o=0;o<r.length;o++)if(r[o].extraKey==n){i=r[o],r.splice(o,1);break}if(!i){var a=e;i=new a(n),i.extraKey=n,i.ObjectPoolKey=e}return i},t.push=function(e){if(null==e)return!1;var n=e.ObjectPoolKey;return t._content[n]?(t._content[n].push(e),!0):!1},t.clear=function(){t._content={}},t.clearClass=function(e,n){void 0===n&&(n=null);for(var i=t._content[e];i&&i.length;){var r=i.pop();n&&r[n](),r=null}t._content[e]=null,delete t._content[e]},t.dealFunc=function(e,n){var i=t._content[e];if(null!=i){var r=0,o=i.length;for(r;o>r;r++)i[r][n]()}},t._content={},t}();__reflect(ObjectPool.prototype,"ObjectPool");var QueueExecutor=function(){function t(){this._functions=new Array}return t.prototype.setCallBack=function(t,e){this._callBack=t,this._callBackTarget=e},t.prototype.regist=function(t,e){this._functions.push([t,e])},t.prototype.start=function(){this.next()},t.prototype.next=function(){if(this._functions)if(0==this._functions.length)this._callBack&&this._callBack.call(this._callBackTarget),this._callBack=null,this._callBackTarget=null,this._functions=null;else{var t=this._functions.shift();t[0].call(t[1])}},t}();__reflect(QueueExecutor.prototype,"QueueExecutor");var RandomUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var n=e-t;return t+Math.random()*n},e.prototype.limitInteger=function(t,e){return Math.round(this.limit(t,e))},e.prototype.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},e}(BaseClass);__reflect(RandomUtils.prototype,"RandomUtils");var RectangleUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.intersects=function(t,e){var n=t.x,i=e.x,r=t.y,o=e.y,a=t.width,s=e.width,c=t.height,h=e.height;return i>n&&i-n>=a?!1:n>i&&n-i>=s?!1:o>r&&o-r>=c?!1:r>o&&r-o>=h?!1:!0},e}(BaseClass);__reflect(RectangleUtils.prototype,"RectangleUtils");var ResourceUtils=function(t){function e(){var e=t.call(this)||this;return e._groupIndex=0,e._configs=new Array,e._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResourceLoadComplete,e),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e.onResourceLoadProgress,e),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,e.onResourceLoadError,e),e}return __extends(e,t),e.prototype.addConfig=function(t,e){this._configs.push([t,e])},e.prototype.loadConfig=function(t,e){this._onConfigComplete=t,this._onConfigCompleteTarget=e,this.loadNextConfig()},e.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var t=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(t[0],t[1])},e.prototype.onConfigCompleteHandle=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},e.prototype.loadGroup=function(t,e,n,i,r){void 0===r&&(r=null),this._groups[t]=[e,n,i,r],RES.loadGroup(t)},e.prototype.loadGroups=function(t,e,n,i,r,o){void 0===o&&(o=null),RES.createGroup(t,e,!0),this.loadGroup(t,n,i,r,o)},e.prototype.pilfererLoadGroup=function(t,e){void 0===e&&(e=null);var n="pilferer_"+t;e||(e=[t]),RES.createGroup(n,e,!0),RES.loadGroup(n,-1)},e.prototype.onResourceLoadComplete=function(t){var e=t.groupName;if(this._groups[e]){var n=this._groups[e][0],i=this._groups[e][2];null!=n&&n.apply(i,[e]),this._groups[e]=null,delete this._groups[e]}},e.prototype.onResourceLoadProgress=function(t){var e=t.groupName;if(this._groups[e]){var n=this._groups[e][1],i=this._groups[e][2];null!=n&&n.call(i,t.itemsLoaded,t.itemsTotal)}},e.prototype.onResourceLoadError=function(t){Log.trace(t.groupName+"资源组有资源加载失败");var e=t.groupName;if(this._groups[e]){var n=this._groups[e][2],i=this._groups[e][3];null!=i&&i.apply(n,[e])}},e.prototype.createGroup=function(t,e){RES.createGroup(t,e,!0)},e.prototype.createResource=function(t,e,n){var i={name:t,type:e,url:n};RES.parseConfig({resources:[i]})},e}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var ShockUtils=function(t){function e(){var e=t.call(this)||this;return e.MAP=0,e.SPRITE=1,e.mapPoss=[new egret.Point(0,3),new egret.Point(0,0),new egret.Point(0,-2)],e.spritePoss=[new egret.Point(5,0),new egret.Point(-5,0),new egret.Point(5,0)],e._shockLength=0,e._shockCount=0,e._rx=0,e._ry=0,e._type=0,e._repeatCount=0,e}return __extends(e,t),e.prototype.destroy=function(){this.stop()},e.prototype.shock=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=null),void 0===n&&(n=3),this._target||(this._type=t,this._target=e,this._type==this.MAP?(this._shockPoss=this.mapPoss.concat(),this._shockLength=this._shockPoss.length):this._type==this.SPRITE&&(this._shockPoss=this.spritePoss.concat(),this._shockLength=this._shockPoss.length),this.start(n))},e.prototype.start=function(t){void 0===t&&(t=1),this.repeatCount=t,this._shockCount=0,this._target&&(this._type!=this.MAP&&(this._rx=this._target.x),this._ry=this._target.y,App.TimerManager.doFrame(1,0,this.onShockEnter,this))},e.prototype.stop=function(){this._target&&(this._type!=this.MAP&&(this._target.x=this._rx),this._target.y=this._ry,App.TimerManager.remove(this.onShockEnter,this)),this._target=null},e.prototype.onShockEnter=function(t){var e=this._shockLength*this._repeatCount;if(this._shockCount>=e)return void this.stop();var n=this._shockCount%this._shockLength,i=this._shockPoss[n];this._target&&(this._type!=this.MAP&&(this._target.x=this._rx+i.x),this._target.y=this._ry+i.y),this._shockCount++},Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(t){this._repeatCount=t},enumerable:!0,configurable:!0}),e}(BaseClass);__reflect(ShockUtils.prototype,"ShockUtils");var StageUtils=function(t){function e(){var n=t.call(this)||this;return null==e._uiStage&&(e._uiStage=new eui.UILayer,e._uiStage.percentHeight=100,e._uiStage.percentWidth=100,e._uiStage.touchEnabled=!1,n.getStage().addChild(e._uiStage)),n}return __extends(e,t),e.prototype.getHeight=function(){return this.getStage().stageHeight},e.prototype.getWidth=function(){return this.getStage().stageWidth},e.prototype.setTouchChildren=function(t){this.getStage().touchChildren=t},e.prototype.setMaxTouches=function(t){this.getStage().maxTouches=t},e.prototype.setFrameRate=function(t){this.getStage().frameRate=t},e.prototype.setScaleMode=function(t){this.getStage().scaleMode=t},e.prototype.getStage=function(){return egret.MainContext.instance.stage},e.prototype.getUIStage=function(){return e._uiStage},e.prototype.startFullscreenAdaptation=function(t,e,n){this.designWidth=t,this.designHeight=e,this.resizeCallback=n,this.stageOnResize()},e.prototype.stageOnResize=function(){this.getStage().removeEventListener(egret.Event.RESIZE,this.stageOnResize,this);var t=this.designWidth,e=this.designHeight,n=window.innerWidth,i=window.innerHeight,r=n/i,o=t/e,a=r/o;if(r>o){var s=a,c=a;t=Math.floor(t*s),e=Math.floor(e*c)}this.getStage().setContentSize(t,e),this.resizeCallback&&this.resizeCallback(),this.getStage().addEventListener(egret.Event.RESIZE,this.stageOnResize,this)},e}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?i(r):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);