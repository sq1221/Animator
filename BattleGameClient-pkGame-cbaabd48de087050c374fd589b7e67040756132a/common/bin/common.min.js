var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},RoleAvatar=function(){function t(t,e,i){if(void 0===i&&(i="dbxiaoren00"),this._armature=AssetManager.getDBArmature(i),null!=this._armature&&(this._headContainer=new egret.Sprite,this._head=new RoleHeadImage(e),this._head.x=.5*-this._head.width,this._head.y=.5*-this._head.height,this._headContainer.addChild(this._head),this._armature.replaceSlot("tou",this._headContainer),1!=t)){var s=this.getDbRes(t),r=this.getAvatarRes(t),a=function(){if(this._armature){var t=AssetManager.dbFactory.getArmatureData(s);if(t){var e=t.defaultSkin;this._armature.replaceSkin(e),this._armature.replaceSlot("tou",this._headContainer)}}}.bind(this);RES.getRes(r[0])?a():(App.ResourceUtils.createGroup(s,r),App.ResourceUtils.loadGroup(s,function(){AssetManager.loadDBAnimation([s]),a()},function(){},this))}}return Object.defineProperty(t.prototype,"avatarConfig",{get:function(){return RES.getRes("avatar_json")},enumerable:!0,configurable:!0}),t.prototype.getDbRes=function(t){return this.avatarConfig.base[t].res},t.prototype.getAvatarRes=function(t){var e=this.getDbRes(t);return[e+"_ske_json",e+"_tex_json",e+"_tex_png"]},Object.defineProperty(t.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._armature.dispose(),this._armature=null,this._head.dispose(),this._head=null},t}();__reflect(RoleAvatar.prototype,"RoleAvatar");var GameExpressTip=function(t){function e(){var e=t.call(this,GameExpressSkin)||this;return e.numMomentPage=1,e.sourceArr1=[[1,2],[2,1],[3,1]],e.sourceArr2=[[4,3],[5,4],[6,4]],e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.lb_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQuit,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onbegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this)},e.prototype.show=function(){t.prototype.show.call(this),this.arrayCollection1=new eui.ArrayCollection([]),this.list.itemRenderer=ItemExpressTip,this.list.dataProvider=this.arrayCollection1,this.setGameType()},e.prototype.onbegin=function(t){this.startPot=t.stageX},e.prototype.onEnd=function(t){var e=this;this.Scroller1.stopAnimation(),this.EndPot=t.stageX;var i=Math.floor(this.startPot-this.EndPot);i>100&&this.numMomentPage!=this.sourceArr1.length?this.numMomentPage++:-100>i&&1!=this.numMomentPage&&this.numMomentPage--;var s=0;0!=i&&(this.pot_1.alpha=.4,this.pot_2.alpha=.4,this.pot_3.alpha=.4,s=this.numMomentPage,egret.Tween.get(this.list).to({scrollH:606*(this.numMomentPage-1)},300).call(function(){e["pot_"+e.numMomentPage].alpha=1}))},e.prototype.addMesssgaeListener=function(){t.prototype.addMesssgaeListener.call(this),App.MessageCenter.addListener(EventMessage.gameCloseExpress,this.onQuit,this)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.onCancel=function(){this.close()},e.prototype.onQuit=function(t){egret.Tween.removeTweens(this.list),this.close()},e.prototype.setGameType=function(){var t=App.GameExpressType;1==t?(this.list.height=130,this.Scroller1.height=130,this.gp_pot.bottom=36,this.gp_express.bottom=106,this.Scroller1.bottom=72,this.pot_1.source="pot_write_png",this.pot_2.source="pot_write_png",this.pot_3.source="pot_write_png"):2==t&&(this.list.height=228,this.Scroller1.height=228,this.gp_pot.bottom=8,this.gp_express.bottom=136,this.Scroller1.bottom=42,this.pot_1.source="pot_zi_png",this.pot_2.source="pot_zi_png",this.pot_3.source="pot_zi_png"),this.img_bg.source="express_kuang"+t+"_png",this.arrayCollection1.replaceAll(this["sourceArr"+t])},e}(StateEui);__reflect(GameExpressTip.prototype,"GameExpressTip");var RoleHeadImage=function(t){function e(e,i,s,r){void 0===i&&(i="tou_png"),void 0===s&&(s=96),void 0===r&&(r=96);var a=t.call(this)||this;if(a.userBase64=!1,a.imgUrl=e,a.maskRes=i,a.bitmap=new egret.Bitmap,a.bitmap.width=s,a.bitmap.height=r,a.bitmap.texture=RES.getRes("tou_png"),a.addChild(a.bitmap),!a.imgUrl||!a.imgUrl.length)return a;var o=a,n=function(t){window.CrossDomainImage.load(t,function(t,e){"SUCCESS"==t?egret.BitmapData.create("base64",e,function(t){var e=new egret.Texture;e.bitmapData=t,o.setBitmap(e)}):console.log("error message: ",e)})};if(-1==a.imgUrl.indexOf("https://")&&-1==a.imgUrl.indexOf("http://")){var h=a.imgUrl.replace(".","_");RES.getResAsync(h,function(t){a.setBitmap(t)},a)}else window.CrossDomainImage?n(a.imgUrl):RES.getResByUrl(a.imgUrl,function(t){a.setBitmap(t)},a,RES.ResourceItem.TYPE_IMAGE);return a}return __extends(e,t),e.prototype.setBitmap=function(t){this.bitmap&&t&&(this.bitmap.texture=t,this.maskRes&&(this.maskBitmap=App.DisplayUtils.createBitmap(this.maskRes),this.maskBitmap.width=this.bitmap.width,this.maskBitmap.height=this.bitmap.height,this.addChild(this.maskBitmap),this.bitmap.mask=this.maskBitmap,this.cacheAsBitmap=!0))},e.prototype.dispose=function(){this.removeChildren(),this.bitmap.texture=null,this.bitmap=null,this.maskBitmap&&(this.maskBitmap.texture=null,this.maskBitmap=null),this.userBase64&&Base64BitmapDataPool.reduceUseNum(this.imgUrl),this.cacheAsBitmap=!1},e}(egret.Sprite);__reflect(RoleHeadImage.prototype,"RoleHeadImage");var EventMessage=function(){function t(){}return t.GameLeave="GameLeave",t.GameGiveUp="GameGiveUp",t.gameCloseGiveUp="gameCloseGiveUp",t.GameExpress="GameExpress",t.GameSendExpress="GameSendExpress",t.ReddotChange="reddotChange",t.ChangeAvatar="changeAvatar",t.WechatAppShow="WechatAppShow",t.WechatShareSuccess="WechatShareSuccess",t.ChatListChange="ChatListChange",t.gameResultLeave="gameResultLeave",t.OpenChatRoomView="OpenChatRoomView",t.OpenHomePageView="OpenHomePageView",t.gameCloseExpress="gameCloseExpress",t.GameGetSkinView="GameGetSkinView",t.MoneyChange="MoneyChange",t.ResumeDanmu="ResumeDanmu",t.BarrageBtnPos="BarrageBtnPos",t.GameSureSelect="GameSureSelect",t.HomePageViewData="HomePageViewData",t.leaderboardSetScore="leaderboardSetScore",t.pauseMessage="pauseMessage",t.SendGameResultC2S="SendGameResultC2S",t.SendGameEventC2S="SendGameEventC2S",t.ReceiveGameEventS2C="ReceiveGameEventS2C",t.ReceiveGameResultS2C="ReceiveGameResultS2C",t.AddErrQuestionC2S="AddErrQuestionC2S",t.GetQuestionsC2S="GetQuestionsC2S",t.GetDataC2S="GetDataC2S",t}();__reflect(EventMessage.prototype,"EventMessage");var CircleMask=function(){function t(){}return t.hide=function(t){this.circleMask||this.init(),this.isHadShow||(this.rect1.width=this.rect2.width=App.GameWidth/2,this.rect1.height=this.rect2.height=App.GameHeight,this.rect3.height=this.rect4.height=App.GameHeight/2,this.rect3.width=this.rect4.width=App.GameWidth,this.circleMask.anchorOffsetX=this.circleMask.width/2,this.circleMask.anchorOffsetY=this.circleMask.height/2,this.circleMask.x=App.GameWidth/2,this.circleMask.y=App.GameHeight/2),App.StageUtils.getStage().addChild(this.circleMask),App.StageUtils.getStage().addChild(this.rect1),App.StageUtils.getStage().addChild(this.rect2),App.StageUtils.getStage().addChild(this.rect3),App.StageUtils.getStage().addChild(this.rect4),this.circleMask.scaleX=this.circleMask.scaleY=this.multiple,this.rect1.x=this.circleMask.x-this.circleMask.width*this.multiple/2-this.rect1.width,this.rect2.x=this.circleMask.x+this.circleMask.width*this.multiple/2,this.rect3.y=this.circleMask.y-this.circleMask.height*this.multiple/2-this.rect3.height,this.rect4.y=this.circleMask.y+this.circleMask.height*this.multiple/2,this.Arr[0]=this.rect1.x,this.Arr[1]=this.rect2.x,this.Arr[2]=this.rect3.y,this.Arr[3]=this.rect4.y;var e=egret.Tween.get(this.circleMask);e.to({scaleX:0,scaleY:0},this.time,egret.Ease.quadInOut),e.call(function(){t()});var i=egret.Tween.get(this.rect1);i.to({x:App.GameWidth/2-this.rect1.width},this.time,egret.Ease.quadInOut);var s=egret.Tween.get(this.rect2);s.to({x:App.GameWidth/2},this.time,egret.Ease.quadInOut);var r=egret.Tween.get(this.rect3);r.to({y:App.GameHeight/2-this.rect3.height},this.time,egret.Ease.quadInOut);var a=egret.Tween.get(this.rect4);a.to({y:App.GameHeight/2},this.time,egret.Ease.quadInOut)},t.show=function(t){this.circleMask||this.init(),this.isHadShow=!0,this.rect1.width=this.rect2.width=App.GameWidth/2,this.rect1.height=this.rect2.height=App.GameHeight,this.rect1.y=this.rect2.y=0,this.rect1.x=App.GameWidth/2-this.rect1.width,this.rect2.x=App.GameWidth/2,this.rect3.height=this.rect4.height=App.GameHeight/2,this.rect3.width=this.rect4.width=App.GameWidth,this.rect3.x=this.rect4.x=0,this.rect3.y=App.GameHeight/2-this.rect3.height,this.rect4.y=App.GameHeight/2,this.circleMask.anchorOffsetX=this.circleMask.width/2,this.circleMask.anchorOffsetY=this.circleMask.height/2,this.circleMask.x=App.GameWidth/2,this.circleMask.y=App.GameHeight/2,this.circleMask.scaleX=this.circleMask.scaleY=0;var e=egret.Tween.get(this.circleMask);e.to({scaleX:this.multiple,scaleY:this.multiple},this.time,egret.Ease.quadInOut),e.call(function(){t()});var i=egret.Tween.get(this.rect1);i.to({x:this.Arr[0]},this.time,egret.Ease.quadInOut);var s=egret.Tween.get(this.rect2);s.to({x:this.Arr[1]},this.time,egret.Ease.quadInOut);var r=egret.Tween.get(this.rect3);r.to({y:this.Arr[2]},this.time,egret.Ease.quadInOut);var a=egret.Tween.get(this.rect4);a.to({y:this.Arr[3]},this.time,egret.Ease.quadInOut)},t.init=function(){this.circleMask=App.DisplayUtils.createBitmap("circlePlot_png"),this.rect1=new eui.Rect,this.rect2=new eui.Rect,this.rect3=new eui.Rect,this.rect4=new eui.Rect,this.rect1.fillColor=0,this.rect2.fillColor=0,this.rect3.fillColor=0,this.rect4.fillColor=0},t.time=550,t.multiple=3,t.Arr=[],t.isHadShow=!1,t}();__reflect(CircleMask.prototype,"CircleMask");var DBAnimButton=function(t){function e(e){var i=t.call(this)||this;return i._armature=e,i._armature.gotoAndStop("normal"),i._armature.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,i.onAnimComplete,i),i.addChild(i._armature),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouch,i),i}return __extends(e,t),e.prototype.onTouch=function(t){this.touch()},e.prototype.onAnimComplete=function(t){this._armature.gotoAndStop("normal")},e.prototype.touch=function(){this._armature.play("touch")},e}(egret.DisplayObjectContainer);__reflect(DBAnimButton.prototype,"DBAnimButton");var DBButton=function(t){function e(e){var i=t.call(this)||this;return i.touchEnabled=!0,i._armature=e,i._armature.gotoAndStop("normal"),i.addChild(i._armature),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouchBegin,i),i}return __extends(e,t),e.prototype.onTouchBegin=function(t){this._armature.gotoAndStop("touch"),this.stage&&this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchEnd=function(t){this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._armature.gotoAndStop("normal")},e}(egret.DisplayObjectContainer);__reflect(DBButton.prototype,"DBButton");var DBProgress=function(t){function e(e){var i=t.call(this)||this;return i._armature=e,i._armature.gotoAndStop("progress"),i.addChild(i._armature),i}return __extends(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},set:function(t){this._progress=t,this._progress>1&&(this._progress=1),this._progress<0&&(this._progress=0),this._armature.gotoAndStopByProgress("progress",this._progress)},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(DBProgress.prototype,"DBProgress");var Base64BitmapDataPool=function(){function t(){}return t.getData=function(t,e){var i=this,s=this.pools[t];if(s)s.useNum+=1,e(s.data);else{if(this.waitLoading[t])return void this.waitLoading[t].push(e);this.waitLoading[t]=[],this.waitLoading[t].push(e),ProxyHttp.wxImgToBase64(t,function(e){var s=e.r.data.split(",");egret.BitmapData.create("base64",s[1],function(e){var s=new egret.Texture;s._setBitmapData(e);var r={data:s,useNum:0};i.pools[t]=r;var a=i.waitLoading[t];a.forEach(function(t){r.useNum+=1,t(r.data)}),i.waitLoading[t]=null,delete i.waitLoading[t]})})}},t.reduceUseNum=function(t){var e=this.pools[t];e&&(e.useNum-=1)},t.pools={},t.waitLoading={},t}();__reflect(Base64BitmapDataPool.prototype,"Base64BitmapDataPool");var GameReady=function(t){function e(e,i,s){void 0===i&&(i="ready_png"),void 0===s&&(s="go_png");var r=t.call(this)||this;return r._callback=e,r.imgReady=AssetManager.getBitmap(i),r.imgGo=AssetManager.getBitmap(s),r.addChild(r.imgReady),r.addChild(r.imgGo),r}return __extends(e,t),e.prototype.hide=function(){this.imgReady.alpha=0,this.imgGo.alpha=0},e.prototype.play=function(){var t=this;this.hide(),App.SoundManager.playEffect("readyGo_mp3"),this.imgReady.alpha=1,this.stepReady=setTimeout(function(){t.hide(),t.imgGo.alpha=1,t.stepGo=setTimeout(function(){t.hide(),t._callback(),clearTimeout(t.stepGo),t.stepGo=void 0},1e3),clearTimeout(t.stepReady),t.stepReady=void 0},1e3)},e.prototype.dispose=function(){this.stepReady&&(clearTimeout(this.stepReady),this.stepReady=void 0),this.stepGo&&(clearTimeout(this.stepGo),this.stepGo=void 0),this._callback=void 0,this.imgGo=void 0,this.imgReady=void 0},e}(egret.DisplayObjectContainer);__reflect(GameReady.prototype,"GameReady");var gameResultInGame=function(t){function e(){var e=t.call(this)||this;return e.winTitle=AssetManager.getBitmap("win_png"),e.loseTitle=AssetManager.getBitmap("lose_png"),e.winTitle.x=-100-e.winTitle.width,e.loseTitle.x=-100-e.loseTitle.width,e.winTitle.y=App.GameHeight/2,e.loseTitle.y=App.GameHeight/2,e.addChild(e.winTitle),e.addChild(e.loseTitle),e}return __extends(e,t),e.prototype.win=function(){var t=this;egret.Tween.get(this.winTitle).to({x:App.GameWidth/2-50},400).to({x:App.GameWidth/2+50},1300).to({x:App.GameWidth+100},400).call(function(){t.winTitle.x=-100-t.winTitle.width})},e.prototype.lose=function(){var t=this;egret.Tween.get(this.loseTitle).to({x:App.GameWidth/2-50},400).to({x:App.GameWidth/2+50},1300).to({x:App.GameWidth+100},400).call(function(){t.loseTitle.x=-100-t.loseTitle.width})},e.prototype.recover=function(){this.winTitle.x=-100-this.winTitle.width,this.loseTitle.x=-100-this.loseTitle.width},e.prototype.dispose=function(){egret.Tween.removeTweens(this.winTitle),egret.Tween.removeTweens(this.loseTitle)},e}(egret.DisplayObjectContainer);__reflect(gameResultInGame.prototype,"gameResultInGame");var ItemExpressTip=function(t){function e(){for(var e=t.call(this,ItemExpressTipskin)||this,i=1;25>i;++i)e["btn_"+i].addEventListener(egret.TouchEvent.TOUCH_TAP,e.onSendMessage,e);return e}return __extends(e,t),e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data[1];if(1==e){this.gp_1.visible=!0,this.gp_2.visible=!1,this.height=130;for(var i=7;10>=i;++i){var s=i-6;this["btn_"+i].img_express.source="express"+this.data[0]+"_"+s+"_png"}}else if(2==e){this.height=130,this.gp_1.visible=!1,this.gp_2.visible=!0;for(var r=1;6>=r;++r)this["btn_"+r].img_express.source="express"+this.data[0]+"_"+r+"_png"}else if(3==e){this.height=228,this.gp_4.visible=!1,this.gp_3.visible=!0;for(var i=11;20>=i;++i){var s=i-10;this["btn_"+i].img_express.source="express"+this.data[0]+"_"+s+"_png"}}else if(4==e){this.height=228,this.gp_3.visible=!1,this.gp_4.visible=!0;for(var i=21;24>=i;++i){var s=i-20;this["btn_"+i].img_express.source="express"+this.data[0]+"_"+s+"_png"}}},e.prototype.onSendMessage=function(t){var e=egret.getTimer();if(e-DataCenter.instance.SendExpressTime>500){DataCenter.instance.SendExpressTime=e;var i="express"+this.data[0]+"_"+t.target.name+"_png";App.MessageCenter.dispatch(EventMessage.GameSendExpress,i)}},e}(EuiItemRenderer);__reflect(ItemExpressTip.prototype,"ItemExpressTip");var QIPaoCartoon=function(t){function e(){return t.call(this,ButtonQipao)||this}return __extends(e,t),e.prototype.setSouce=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0),0==i?e?-1==t.indexOf("express1")?(this.btn_qipao.visible=!1,this.btn_qipao2.visible=!0,this.btn_qipao2.img.source=t,this.anchorOffsetX=this.width):(this.btn_qipao3.visible=!0,this.btn_qipao3.img.source=t,this.width=this.btn_qipao3.width,this.anchorOffsetX=this.width):(this.btn_qipao.visible=!0,this.btn_qipao2.visible=!1,this.btn_qipao.img.source=t):1==i&&(e?(this.img_2.visible=!0,this.width=this.img_2.width,this.anchorOffsetX=this.width,this.img_2.source=t):(this.img_1.visible=!0,this.img_1.source=t))},e.prototype.setFanzhuan=function(){},e.prototype.onPlayTanDong=function(){},e.prototype.onPlay=function(t){var e=this;void 0===t&&(t=0),0==t?(egret.Tween.get(this).to({y:this.y+App.RandomUtils.limitInteger(100,140)},800),egret.Tween.get(this).wait(500).to({alpha:0},700).call(function(){e.parent.removeChild(e),egret.Tween.removeTweens(e);var t=e;t=null})):1==t?(egret.Tween.get(this).to({x:this.x+App.RandomUtils.limitInteger(100,140)},800),egret.Tween.get(this).wait(300).to({alpha:0},500).call(function(){e.parent.removeChild(e),egret.Tween.removeTweens(e);var t=e;t=null})):2==t&&(egret.Tween.get(this).to({x:this.x-App.RandomUtils.limitInteger(100,140)},800),egret.Tween.get(this).wait(300).to({alpha:0},500).call(function(){e.parent.removeChild(e),egret.Tween.removeTweens(e);var t=e;t=null}))},e}(EuiComponent);__reflect(QIPaoCartoon.prototype,"QIPaoCartoon");var DataCenter=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SendExpressTime=0,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.initConfig=function(t){this.gameConfigs=t.games},e.prototype.getGameConfig=function(t){var e,i;for(e=0,i=this.gameConfigs.length;i>e;e++)if(this.gameConfigs[e].gameId==t)return this.gameConfigs[e];return null},e}(egret.EventDispatcher);__reflect(DataCenter.prototype,"DataCenter");var RoomVO=function(){function t(t,e,i,s){this.id=t,this.gameId=e,this.player=i,this._isAi=s}return Object.defineProperty(t.prototype,"IsAI",{get:function(){return this._isAi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selfIsMaster",{get:function(){if(this._isAi)return!0;var t=App.CurrChatId.split("_");return t[0]==DataCenter.instance.user.id.toString()},enumerable:!0,configurable:!0}),t}();__reflect(RoomVO.prototype,"RoomVO");var User=function(t){function e(e){var i=t.call(this)||this;return i.name="",i.sex=0,i.imgUrl="",i.country="",i.province="",i.city="",i.money=0,i.exp=0,i.guide=0,i.constellatory=0,i.barrage_num=0,i.status=0,i.roomId=-1,i.gameId=-1,i.id=e,i}return __extends(e,t),e.EVENT_LOAD_COMPLETE="EVENT_LOAD_COMPLETE",e.STATUS_IDLE=0,e.STATUS_ROOM=1,e.STATUS_MATCHING=2,e.STATUS_GAME_LOADING=3,e.STATUS_GAMING=4,e.STATUS_GAME_RESULT=5,e}(egret.EventDispatcher);__reflect(User.prototype,"User");